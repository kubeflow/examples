<script type="text/javascript">
    RED.nodes.registerType('model predict', {
        category: 'autoAI pipeline',
        color: '#FEDFE1',
        defaults: {
            name: { value: "" },
            path: { value: "", required: true },
            model: { value: "", required: true },
            height: {value: "", required: true},
            width: {value: "", required: true},
            channel: {value: "", required: true},
            datatype: { value: "csv", required: true }
        },
        inputs: 1,
        outputs: 1,
        icon: "font-awesome/fa-dashboard",
        label: function() {
            return  this.name || this.path.substring(this.path.lastIndexOf('/') + 1, this.path.length);
        },
        oneditprepare: function() {
            const nodeInputdatatype = $("#node-input-datatype");
            const toggle2D = $(".toggle-2D");
            const datatypecsv = $(".datatype-csv");
            const datatypeImage = $(".datatype-image");
            const PathInput = $("#node-input-path");
            const Height = $("#node-input-height");
            const Width = $("#node-input-width");
            const Channel = $("#node-input-channel");
  
            const updateVisibilityAndValues = () => {
                const iscsv = nodeInputdatatype.val() === "csv";
    
                toggle2D.toggle(!iscsv);
                
    
                datatypecsv.toggleClass("selected", iscsv);
                datatypeImage.toggleClass("selected", !iscsv);
    
                if (iscsv && !Height.val() && !Width.val() && !Channel.val()) {
                   Height.val("1"); 
                   Width.val("1");
                   Channel.val("1");
                } 
            };
    
            $(".datatype-toggle button").on("click", function() {
                nodeInputdatatype.val($(this).hasClass("datatype-csv") ? "csv" : "image");
                updateVisibilityAndValues();
            });
    
          
            nodeInputdatatype.on("input", updateVisibilityAndValues);
    
            updateVisibilityAndValues();
            
        }
        
    });
  </script>
  
  <script type="text/x-red" data-template-name="model predict">
    <div class="form-row">
        <label for="node-input-name">Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <br>
    <h3>Data Type </h3>
    <div class="form-row">
        <span class="datatype-toggle">
        <button
            type="button"
            class="red-ui-button toggle datatype-csv"
        >
            CSV
        </button>
        <button
            type="button"
            class="red-ui-button toggle datatype-image"
        >
            Image
        </button>
        </span>
    </div>
    <div class="form-row toggle-commom">
        <label for="node-input-path" id="path">Data Path</label>
        <input type="text" id="node-input-path" placeholder="Enter the path to your data file">
    </div>
    <div class="form-row toggle-common">
        <label for="node-input-model" id="model">model</label>
        <input type="text" id="node-input-model" placeholder="Enter the model for prediction">
    </div>
    <div class="form-row toggle-2D">
      <label for="node-input-height" id="height">Height</label>
      <input type="number" min="1" id="node-input-height" />
    </div>
    <div class="form-row toggle-2D">
        <label for="node-input-width" id="width">Width</label>
        <input type="number" min="1" id="node-input-width" />
    </div>
    <div class="form-row toggle-2D">
        <label for="node-input-channel" id="channel">Channel</label>
        <input type="number" min="1" max="3" id="node-input-channel" />
    </div>
    <div hidden>
        <input type="text" id="node-input-datatype" />
    </div>
  </script>
  
  <script type="text/x-red" data-help-name="model predict">
    <p>A node to choose model for data prediction.</p>
  </script>
  
  
  